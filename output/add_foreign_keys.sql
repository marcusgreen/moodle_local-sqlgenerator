/* Moodle version 2019052000.04 Release 3.7+ (Build: 20190614) Add Foreign Keys code */
ALTER TABLE mdl_competency_userevidencecomp ADD FOREIGN KEY (competencyid) REFERENCES mdl_competency (id);
ALTER TABLE mdl_competency_plancomp ADD FOREIGN KEY (competencyid) REFERENCES mdl_competency (id);
ALTER TABLE mdl_competency_usercompplan ADD FOREIGN KEY (competencyid) REFERENCES mdl_competency (id);
ALTER TABLE mdl_competency_usercompcourse ADD FOREIGN KEY (competencyid) REFERENCES mdl_competency (id);
ALTER TABLE mdl_competency_usercomp ADD FOREIGN KEY (competencyid) REFERENCES mdl_competency (id);
ALTER TABLE mdl_competency_relatedcomp ADD FOREIGN KEY (competencyid) REFERENCES mdl_competency (id);
ALTER TABLE mdl_competency_templatecomp ADD FOREIGN KEY (competencyid) REFERENCES mdl_competency (id);
ALTER TABLE mdl_competency_modulecomp ADD FOREIGN KEY (competencyid) REFERENCES mdl_competency (id);
ALTER TABLE mdl_competency_plancomp ADD FOREIGN KEY (competencyid) REFERENCES mdl_competency (id);
ALTER TABLE mdl_competency_plan ADD FOREIGN KEY (templateid) REFERENCES mdl_competency_template (id);
ALTER TABLE mdl_competency_templatecohort ADD FOREIGN KEY (templateid) REFERENCES mdl_competency_template (id);
ALTER TABLE mdl_competency ADD FOREIGN KEY (competencyframeworkid) REFERENCES mdl_competency_framework (id);
ALTER TABLE mdl_competency_evidence ADD FOREIGN KEY (usercompetencyid) REFERENCES mdl_competency_usercomp (id);
ALTER TABLE mdl_course_modules ADD FOREIGN KEY (course) REFERENCES mdl_course (id);
ALTER TABLE mdl_course_published ADD FOREIGN KEY (course) REFERENCES mdl_course (id);
ALTER TABLE mdl_course_sections ADD FOREIGN KEY (course) REFERENCES mdl_course (id);
ALTER TABLE mdl_course_completions ADD FOREIGN KEY (course) REFERENCES mdl_course (id);
ALTER TABLE mdl_course_completion_aggr_methd ADD FOREIGN KEY (course) REFERENCES mdl_course (id);
ALTER TABLE mdl_course_categories ADD FOREIGN KEY (parent) REFERENCES mdl_course_categories (id);
ALTER TABLE mdl_course ADD FOREIGN KEY (category) REFERENCES mdl_course_categories (id);
ALTER TABLE mdl_user_preferences ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_book_chapters ADD FOREIGN KEY (bookid) REFERENCES mdl_book (id);
ALTER TABLE mdl_enrol_paypal ADD FOREIGN KEY (courseid) REFERENCES mdl_course (id);
ALTER TABLE mdl_forum_read ADD FOREIGN KEY (forumid) REFERENCES mdl_forum (id);
ALTER TABLE mdl_lti ADD FOREIGN KEY (typeid) REFERENCES mdl_lti_types (id);
ALTER TABLE mdl_lti_submission ADD FOREIGN KEY (ltiid) REFERENCES mdl_lti (id);
ALTER TABLE mdl_lti_submission ADD FOREIGN KEY (ltiid) REFERENCES mdl_lti (id);
ALTER TABLE mdl_question_statistics ADD FOREIGN KEY (questionid) REFERENCES mdl_question (id);
ALTER TABLE mdl_user_lastaccess ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_user_info_data ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_user_preferences ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_message_contacts ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_message_working ADD FOREIGN KEY (unreadmessageid) REFERENCES mdl_message (id);
ALTER TABLE mdl_message_working ADD FOREIGN KEY (processorid) REFERENCES mdl_message_processors (id);
ALTER TABLE mdl_message_read ADD FOREIGN KEY (useridfrom) REFERENCES mdl_user (id);
ALTER TABLE mdl_message_read ADD FOREIGN KEY (useridto) REFERENCES mdl_user (id);
ALTER TABLE mdl_messageinbound_messagelist ADD FOREIGN KEY (messageid) REFERENCES mdl_message (id);
ALTER TABLE mdl_message_popup ADD FOREIGN KEY (messageid) REFERENCES mdl_message (id);
ALTER TABLE mdl_block_instances ADD FOREIGN KEY (blockname) REFERENCES mdl_block (name);
ALTER TABLE mdl_block_rss_client ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_block_rss_client ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_block_recent_activity ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_block_community ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_forum_track_prefs ADD FOREIGN KEY (userid) REFERENCES mdl_forum (id);
ALTER TABLE mdl_forum_read ADD FOREIGN KEY (forumid) REFERENCES mdl_forum (id);
ALTER TABLE mdl_forum_read ADD FOREIGN KEY (discussionid) REFERENCES mdl_forum_discussions (id);
ALTER TABLE mdl_forum_read ADD FOREIGN KEY (postid) REFERENCES mdl_forum_posts (id);
ALTER TABLE mdl_course_completion_criteria ADD FOREIGN KEY (course) REFERENCES mdl_course (id);
ALTER TABLE mdl_backup_courses ADD FOREIGN KEY (courseid) REFERENCES mdl_course (id);
ALTER TABLE mdl_user_info_data ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_user_info_data ADD FOREIGN KEY (fieldid) REFERENCES mdl_user_info_field (id);
ALTER TABLE mdl_user_info_field ADD FOREIGN KEY (categoryid) REFERENCES mdl_user_info_category (id);
ALTER TABLE mdl_glossary_formats ADD FOREIGN KEY (name) REFERENCES mdl_glossary (introformat);
ALTER TABLE mdl_wiki_synonyms ADD FOREIGN KEY (subwikiid) REFERENCES mdl_wiki_subwikis (id);
ALTER TABLE mdl_wiki_synonyms ADD FOREIGN KEY (pageid) REFERENCES mdl_wiki_pages (id);
/* End of Extra Foreign Keys */ 
ALTER TABLE mdl_config_log ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_upgrade_log ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_course_categories ADD FOREIGN KEY (parent) REFERENCES mdl_course_categories (id);
ALTER TABLE mdl_enrol ADD FOREIGN KEY (courseid) REFERENCES mdl_course (id);
ALTER TABLE mdl_user_enrolments ADD FOREIGN KEY (enrolid) REFERENCES mdl_enrol (id);
ALTER TABLE mdl_user_enrolments ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_user_enrolments ADD FOREIGN KEY (modifierid) REFERENCES mdl_user (id);
ALTER TABLE mdl_course_modules ADD FOREIGN KEY (groupingid) REFERENCES mdl_groupings (id);
ALTER TABLE mdl_course_format_options ADD FOREIGN KEY (courseid) REFERENCES mdl_course (id);
ALTER TABLE mdl_filter_active ADD FOREIGN KEY (contextid) REFERENCES mdl_context (id);
ALTER TABLE mdl_filter_config ADD FOREIGN KEY (contextid) REFERENCES mdl_context (id);
ALTER TABLE mdl_event ADD FOREIGN KEY (categoryid) REFERENCES mdl_course_categories (id);
ALTER TABLE mdl_event ADD FOREIGN KEY (subscriptionid) REFERENCES mdl_event_subscriptions (id);
ALTER TABLE mdl_messages ADD FOREIGN KEY (useridfrom) REFERENCES mdl_user (id);
ALTER TABLE mdl_messages ADD FOREIGN KEY (conversationid) REFERENCES mdl_message_conversations (id);
ALTER TABLE mdl_message_conversations ADD FOREIGN KEY (contextid) REFERENCES mdl_context (id);
ALTER TABLE mdl_message_conversation_members ADD FOREIGN KEY (conversationid) REFERENCES mdl_message_conversations (id);
ALTER TABLE mdl_message_conversation_members ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_message_conversation_actions ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_message_conversation_actions ADD FOREIGN KEY (conversationid) REFERENCES mdl_message_conversations (id);
ALTER TABLE mdl_message_user_actions ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_message_user_actions ADD FOREIGN KEY (messageid) REFERENCES mdl_messages (id);
ALTER TABLE mdl_notifications ADD FOREIGN KEY (useridto) REFERENCES mdl_user (id);
ALTER TABLE mdl_message_contacts ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_message_contacts ADD FOREIGN KEY (contactid) REFERENCES mdl_user (id);
ALTER TABLE mdl_message_contact_requests ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_message_contact_requests ADD FOREIGN KEY (requesteduserid) REFERENCES mdl_user (id);
ALTER TABLE mdl_message_users_blocked ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_message_users_blocked ADD FOREIGN KEY (blockeduserid) REFERENCES mdl_user (id);
ALTER TABLE mdl_sessions ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_user_password_history ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_scale_history ADD FOREIGN KEY (oldid) REFERENCES mdl_scale (id);
ALTER TABLE mdl_scale_history ADD FOREIGN KEY (courseid) REFERENCES mdl_course (id);
ALTER TABLE mdl_scale_history ADD FOREIGN KEY (loggeduser) REFERENCES mdl_user (id);
ALTER TABLE mdl_post ADD FOREIGN KEY (usermodified) REFERENCES mdl_user (id);
ALTER TABLE mdl_role_allow_assign ADD FOREIGN KEY (roleid) REFERENCES mdl_role (id);
ALTER TABLE mdl_role_allow_assign ADD FOREIGN KEY (allowassign) REFERENCES mdl_role (id);
ALTER TABLE mdl_role_allow_override ADD FOREIGN KEY (roleid) REFERENCES mdl_role (id);
ALTER TABLE mdl_role_allow_override ADD FOREIGN KEY (allowoverride) REFERENCES mdl_role (id);
ALTER TABLE mdl_role_allow_switch ADD FOREIGN KEY (roleid) REFERENCES mdl_role (id);
ALTER TABLE mdl_role_allow_switch ADD FOREIGN KEY (allowswitch) REFERENCES mdl_role (id);
ALTER TABLE mdl_role_allow_view ADD FOREIGN KEY (roleid) REFERENCES mdl_role (id);
ALTER TABLE mdl_role_allow_view ADD FOREIGN KEY (allowview) REFERENCES mdl_role (id);
ALTER TABLE mdl_role_assignments ADD FOREIGN KEY (roleid) REFERENCES mdl_role (id);
ALTER TABLE mdl_role_assignments ADD FOREIGN KEY (contextid) REFERENCES mdl_context (id);
ALTER TABLE mdl_role_assignments ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_role_capabilities ADD FOREIGN KEY (roleid) REFERENCES mdl_role (id);
ALTER TABLE mdl_role_capabilities ADD FOREIGN KEY (contextid) REFERENCES mdl_context (id);
ALTER TABLE mdl_role_capabilities ADD FOREIGN KEY (modifierid) REFERENCES mdl_user (id);
ALTER TABLE mdl_role_capabilities ADD FOREIGN KEY (capability) REFERENCES mdl_capabilities (name);
ALTER TABLE mdl_role_names ADD FOREIGN KEY (roleid) REFERENCES mdl_role (id);
ALTER TABLE mdl_role_names ADD FOREIGN KEY (contextid) REFERENCES mdl_context (id);
ALTER TABLE mdl_role_context_levels ADD FOREIGN KEY (roleid) REFERENCES mdl_role (id);
ALTER TABLE mdl_question_categories ADD FOREIGN KEY (parent) REFERENCES mdl_question_categories (id);
ALTER TABLE mdl_question ADD FOREIGN KEY (category) REFERENCES mdl_question_categories (id);
ALTER TABLE mdl_question ADD FOREIGN KEY (parent) REFERENCES mdl_question (id);
ALTER TABLE mdl_question ADD FOREIGN KEY (createdby) REFERENCES mdl_user (id);
ALTER TABLE mdl_question ADD FOREIGN KEY (modifiedby) REFERENCES mdl_user (id);
ALTER TABLE mdl_question_answers ADD FOREIGN KEY (question) REFERENCES mdl_question (id);
ALTER TABLE mdl_question_hints ADD FOREIGN KEY (questionid) REFERENCES mdl_question (id);
ALTER TABLE mdl_question_usages ADD FOREIGN KEY (contextid) REFERENCES mdl_context (id);
ALTER TABLE mdl_question_attempts ADD FOREIGN KEY (questionid) REFERENCES mdl_question (id);
ALTER TABLE mdl_question_attempts ADD FOREIGN KEY (questionusageid) REFERENCES mdl_question_usages (id);
ALTER TABLE mdl_question_attempt_steps ADD FOREIGN KEY (questionattemptid) REFERENCES mdl_question_attempts (id);
ALTER TABLE mdl_question_attempt_steps ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_question_attempt_step_data ADD FOREIGN KEY (attemptstepid) REFERENCES mdl_question_attempt_steps (id);
ALTER TABLE mdl_question_response_count ADD FOREIGN KEY (analysisid) REFERENCES mdl_question_response_analysis (id);
ALTER TABLE mdl_mnet_host ADD FOREIGN KEY (applicationid) REFERENCES mdl_mnet_application (id);
ALTER TABLE mdl_events_queue ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_events_queue_handlers ADD FOREIGN KEY (queuedeventid) REFERENCES mdl_events_queue (id);
ALTER TABLE mdl_events_queue_handlers ADD FOREIGN KEY (handlerid) REFERENCES mdl_events_handlers (id);
ALTER TABLE mdl_grade_outcomes ADD FOREIGN KEY (courseid) REFERENCES mdl_course (id);
ALTER TABLE mdl_grade_outcomes ADD FOREIGN KEY (scaleid) REFERENCES mdl_scale (id);
ALTER TABLE mdl_grade_outcomes ADD FOREIGN KEY (usermodified) REFERENCES mdl_user (id);
ALTER TABLE mdl_grade_outcomes_courses ADD FOREIGN KEY (courseid) REFERENCES mdl_course (id);
ALTER TABLE mdl_grade_outcomes_courses ADD FOREIGN KEY (outcomeid) REFERENCES mdl_grade_outcomes (id);
ALTER TABLE mdl_grade_categories ADD FOREIGN KEY (courseid) REFERENCES mdl_course (id);
ALTER TABLE mdl_grade_categories ADD FOREIGN KEY (parent) REFERENCES mdl_grade_categories (id);
ALTER TABLE mdl_grade_items ADD FOREIGN KEY (courseid) REFERENCES mdl_course (id);
ALTER TABLE mdl_grade_items ADD FOREIGN KEY (categoryid) REFERENCES mdl_grade_categories (id);
ALTER TABLE mdl_grade_items ADD FOREIGN KEY (scaleid) REFERENCES mdl_scale (id);
ALTER TABLE mdl_grade_items ADD FOREIGN KEY (outcomeid) REFERENCES mdl_grade_outcomes (id);
ALTER TABLE mdl_grade_grades ADD FOREIGN KEY (itemid) REFERENCES mdl_grade_items (id);
ALTER TABLE mdl_grade_grades ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_grade_grades ADD FOREIGN KEY (rawscaleid) REFERENCES mdl_scale (id);
ALTER TABLE mdl_grade_grades ADD FOREIGN KEY (usermodified) REFERENCES mdl_user (id);
ALTER TABLE mdl_grade_outcomes_history ADD FOREIGN KEY (oldid) REFERENCES mdl_grade_outcomes (id);
ALTER TABLE mdl_grade_outcomes_history ADD FOREIGN KEY (courseid) REFERENCES mdl_course (id);
ALTER TABLE mdl_grade_outcomes_history ADD FOREIGN KEY (scaleid) REFERENCES mdl_scale (id);
ALTER TABLE mdl_grade_outcomes_history ADD FOREIGN KEY (loggeduser) REFERENCES mdl_user (id);
ALTER TABLE mdl_grade_categories_history ADD FOREIGN KEY (oldid) REFERENCES mdl_grade_categories (id);
ALTER TABLE mdl_grade_categories_history ADD FOREIGN KEY (courseid) REFERENCES mdl_course (id);
ALTER TABLE mdl_grade_categories_history ADD FOREIGN KEY (parent) REFERENCES mdl_grade_categories (id);
ALTER TABLE mdl_grade_categories_history ADD FOREIGN KEY (loggeduser) REFERENCES mdl_user (id);
ALTER TABLE mdl_grade_items_history ADD FOREIGN KEY (oldid) REFERENCES mdl_grade_items (id);
ALTER TABLE mdl_grade_items_history ADD FOREIGN KEY (courseid) REFERENCES mdl_course (id);
ALTER TABLE mdl_grade_items_history ADD FOREIGN KEY (categoryid) REFERENCES mdl_grade_categories (id);
ALTER TABLE mdl_grade_items_history ADD FOREIGN KEY (scaleid) REFERENCES mdl_scale (id);
ALTER TABLE mdl_grade_items_history ADD FOREIGN KEY (outcomeid) REFERENCES mdl_grade_outcomes (id);
ALTER TABLE mdl_grade_items_history ADD FOREIGN KEY (loggeduser) REFERENCES mdl_user (id);
ALTER TABLE mdl_grade_grades_history ADD FOREIGN KEY (oldid) REFERENCES mdl_grade_grades (id);
ALTER TABLE mdl_grade_grades_history ADD FOREIGN KEY (itemid) REFERENCES mdl_grade_items (id);
ALTER TABLE mdl_grade_grades_history ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_grade_grades_history ADD FOREIGN KEY (rawscaleid) REFERENCES mdl_scale (id);
ALTER TABLE mdl_grade_grades_history ADD FOREIGN KEY (usermodified) REFERENCES mdl_user (id);
ALTER TABLE mdl_grade_grades_history ADD FOREIGN KEY (loggeduser) REFERENCES mdl_user (id);
ALTER TABLE mdl_grade_import_newitem ADD FOREIGN KEY (importer) REFERENCES mdl_user (id);
ALTER TABLE mdl_grade_import_values ADD FOREIGN KEY (itemid) REFERENCES mdl_grade_items (id);
ALTER TABLE mdl_grade_import_values ADD FOREIGN KEY (newgradeitem) REFERENCES mdl_grade_import_newitem (id);
ALTER TABLE mdl_grade_import_values ADD FOREIGN KEY (importer) REFERENCES mdl_user (id);
ALTER TABLE mdl_tag_area ADD FOREIGN KEY (tagcollid) REFERENCES mdl_tag_coll (id);
ALTER TABLE mdl_tag ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_tag ADD FOREIGN KEY (tagcollid) REFERENCES mdl_tag_coll (id);
ALTER TABLE mdl_tag_correlation ADD FOREIGN KEY (tagid) REFERENCES mdl_tag (id);
ALTER TABLE mdl_tag_instance ADD FOREIGN KEY (tagid) REFERENCES mdl_tag (id);
ALTER TABLE mdl_tag_instance ADD FOREIGN KEY (contextid) REFERENCES mdl_context (id);
ALTER TABLE mdl_groups ADD FOREIGN KEY (courseid) REFERENCES mdl_course (id);
ALTER TABLE mdl_groupings ADD FOREIGN KEY (courseid) REFERENCES mdl_course (id);
ALTER TABLE mdl_groups_members ADD FOREIGN KEY (groupid) REFERENCES mdl_groups (id);
ALTER TABLE mdl_groups_members ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_groupings_groups ADD FOREIGN KEY (groupingid) REFERENCES mdl_groupings (id);
ALTER TABLE mdl_groupings_groups ADD FOREIGN KEY (groupid) REFERENCES mdl_groups (id);
ALTER TABLE mdl_cohort ADD FOREIGN KEY (contextid) REFERENCES mdl_context (id);
ALTER TABLE mdl_cohort_members ADD FOREIGN KEY (cohortid) REFERENCES mdl_cohort (id);
ALTER TABLE mdl_cohort_members ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_user_private_key ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_grade_settings ADD FOREIGN KEY (courseid) REFERENCES mdl_course (id);
ALTER TABLE mdl_portfolio_instance_config ADD FOREIGN KEY (instance) REFERENCES mdl_portfolio_instance (id);
ALTER TABLE mdl_portfolio_instance_user ADD FOREIGN KEY (instance) REFERENCES mdl_portfolio_instance (id);
ALTER TABLE mdl_portfolio_instance_user ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_portfolio_log ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_portfolio_log ADD FOREIGN KEY (portfolio) REFERENCES mdl_portfolio_instance (id);
ALTER TABLE mdl_portfolio_tempdata ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_portfolio_tempdata ADD FOREIGN KEY (instance) REFERENCES mdl_portfolio_instance (id);
ALTER TABLE mdl_files ADD FOREIGN KEY (contextid) REFERENCES mdl_context (id);
ALTER TABLE mdl_files ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_files ADD FOREIGN KEY (referencefileid) REFERENCES mdl_files_reference (id);
ALTER TABLE mdl_files_reference ADD FOREIGN KEY (repositoryid) REFERENCES mdl_repository_instances (id);
ALTER TABLE mdl_file_conversion ADD FOREIGN KEY (sourcefileid) REFERENCES mdl_files (id);
ALTER TABLE mdl_file_conversion ADD FOREIGN KEY (destfileid) REFERENCES mdl_files (id);
ALTER TABLE mdl_block_instances ADD FOREIGN KEY (parentcontextid) REFERENCES mdl_context (id);
ALTER TABLE mdl_block_positions ADD FOREIGN KEY (blockinstanceid) REFERENCES mdl_block_instances (id);
ALTER TABLE mdl_block_positions ADD FOREIGN KEY (contextid) REFERENCES mdl_context (id);
ALTER TABLE mdl_comments ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_external_services_functions ADD FOREIGN KEY (externalserviceid) REFERENCES mdl_external_services (id);
ALTER TABLE mdl_external_services_users ADD FOREIGN KEY (externalserviceid) REFERENCES mdl_external_services (id);
ALTER TABLE mdl_external_services_users ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_external_tokens ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_external_tokens ADD FOREIGN KEY (externalserviceid) REFERENCES mdl_external_services (id);
ALTER TABLE mdl_external_tokens ADD FOREIGN KEY (contextid) REFERENCES mdl_context (id);
ALTER TABLE mdl_external_tokens ADD FOREIGN KEY (creatorid) REFERENCES mdl_user (id);
ALTER TABLE mdl_blog_association ADD FOREIGN KEY (contextid) REFERENCES mdl_context (id);
ALTER TABLE mdl_blog_association ADD FOREIGN KEY (blogid) REFERENCES mdl_post (id);
ALTER TABLE mdl_blog_external ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_rating ADD FOREIGN KEY (contextid) REFERENCES mdl_context (id);
ALTER TABLE mdl_rating ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_backup_controllers ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_backup_logs ADD FOREIGN KEY (backupid) REFERENCES mdl_backup_controllers (backupid);
ALTER TABLE mdl_grading_areas ADD FOREIGN KEY (contextid) REFERENCES mdl_context (id);
ALTER TABLE mdl_grading_definitions ADD FOREIGN KEY (areaid) REFERENCES mdl_grading_areas (id);
ALTER TABLE mdl_grading_definitions ADD FOREIGN KEY (usermodified) REFERENCES mdl_user (id);
ALTER TABLE mdl_grading_definitions ADD FOREIGN KEY (usercreated) REFERENCES mdl_user (id);
ALTER TABLE mdl_grading_instances ADD FOREIGN KEY (definitionid) REFERENCES mdl_grading_definitions (id);
ALTER TABLE mdl_grading_instances ADD FOREIGN KEY (raterid) REFERENCES mdl_user (id);
ALTER TABLE mdl_badge ADD FOREIGN KEY (courseid) REFERENCES mdl_course (id);
ALTER TABLE mdl_badge ADD FOREIGN KEY (usermodified) REFERENCES mdl_user (id);
ALTER TABLE mdl_badge ADD FOREIGN KEY (usercreated) REFERENCES mdl_user (id);
ALTER TABLE mdl_badge_criteria ADD FOREIGN KEY (badgeid) REFERENCES mdl_badge (id);
ALTER TABLE mdl_badge_criteria_param ADD FOREIGN KEY (critid) REFERENCES mdl_badge_criteria (id);
ALTER TABLE mdl_badge_issued ADD FOREIGN KEY (badgeid) REFERENCES mdl_badge (id);
ALTER TABLE mdl_badge_issued ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_badge_criteria_met ADD FOREIGN KEY (critid) REFERENCES mdl_badge_criteria (id);
ALTER TABLE mdl_badge_criteria_met ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_badge_criteria_met ADD FOREIGN KEY (issuedid) REFERENCES mdl_badge_issued (id);
ALTER TABLE mdl_badge_endorsement ADD FOREIGN KEY (badgeid) REFERENCES mdl_badge (id);
ALTER TABLE mdl_badge_manual_award ADD FOREIGN KEY (badgeid) REFERENCES mdl_badge (id);
ALTER TABLE mdl_badge_manual_award ADD FOREIGN KEY (recipientid) REFERENCES mdl_user (id);
ALTER TABLE mdl_badge_manual_award ADD FOREIGN KEY (issuerid) REFERENCES mdl_user (id);
ALTER TABLE mdl_badge_manual_award ADD FOREIGN KEY (issuerrole) REFERENCES mdl_role (id);
ALTER TABLE mdl_badge_backpack ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_badge_backpack ADD FOREIGN KEY (externalbackpackid) REFERENCES mdl_badge_external_backpack (id);
ALTER TABLE mdl_badge_external ADD FOREIGN KEY (backpackid) REFERENCES mdl_badge_backpack (id);
ALTER TABLE mdl_badge_external_identifier ADD FOREIGN KEY (sitebackpackid) REFERENCES mdl_badge_backpack (id);
ALTER TABLE mdl_badge_alignment ADD FOREIGN KEY (badgeid) REFERENCES mdl_badge (id);
ALTER TABLE mdl_badge_related ADD FOREIGN KEY (badgeid) REFERENCES mdl_badge (id);
ALTER TABLE mdl_badge_related ADD FOREIGN KEY (relatedbadgeid) REFERENCES mdl_badge (id);
ALTER TABLE mdl_user_devices ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_user_password_resets ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_task_adhoc ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_messageinbound_datakeys ADD FOREIGN KEY (handler) REFERENCES mdl_messageinbound_handlers (id);
ALTER TABLE mdl_messageinbound_messagelist ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_competency_coursecomp ADD FOREIGN KEY (courseid) REFERENCES mdl_course (id);
ALTER TABLE mdl_competency_coursecomp ADD FOREIGN KEY (competencyid) REFERENCES mdl_competency (id);
ALTER TABLE mdl_competency_templatecomp ADD FOREIGN KEY (templateid) REFERENCES mdl_competency_template (id);
ALTER TABLE mdl_competency_templatecomp ADD FOREIGN KEY (competencyid) REFERENCES mdl_competency (id);
ALTER TABLE mdl_competency_modulecomp ADD FOREIGN KEY (cmid) REFERENCES mdl_course_modules (id);
ALTER TABLE mdl_competency_modulecomp ADD FOREIGN KEY (competencyid) REFERENCES mdl_competency (id);
ALTER TABLE mdl_oauth2_endpoint ADD FOREIGN KEY (issuerid) REFERENCES mdl_oauth2_issuer (id);
ALTER TABLE mdl_oauth2_user_field_mapping ADD FOREIGN KEY (issuerid) REFERENCES mdl_oauth2_issuer (id);
ALTER TABLE mdl_course_completion_defaults ADD FOREIGN KEY (module) REFERENCES mdl_modules (id);
ALTER TABLE mdl_course_completion_defaults ADD FOREIGN KEY (course) REFERENCES mdl_course (id);
ALTER TABLE mdl_analytics_models_log ADD FOREIGN KEY (modelid) REFERENCES mdl_analytics_models (id);
ALTER TABLE mdl_analytics_predictions ADD FOREIGN KEY (modelid) REFERENCES mdl_analytics_models (id);
ALTER TABLE mdl_analytics_predictions ADD FOREIGN KEY (contextid) REFERENCES mdl_context (id);
ALTER TABLE mdl_analytics_train_samples ADD FOREIGN KEY (modelid) REFERENCES mdl_analytics_models (id);
ALTER TABLE mdl_analytics_predict_samples ADD FOREIGN KEY (modelid) REFERENCES mdl_analytics_models (id);
ALTER TABLE mdl_analytics_used_files ADD FOREIGN KEY (modelid) REFERENCES mdl_analytics_models (id);
ALTER TABLE mdl_analytics_used_files ADD FOREIGN KEY (fileid) REFERENCES mdl_files (id);
ALTER TABLE mdl_analytics_indicator_calc ADD FOREIGN KEY (contextid) REFERENCES mdl_context (id);
ALTER TABLE mdl_analytics_prediction_actions ADD FOREIGN KEY (predictionid) REFERENCES mdl_analytics_predictions (id);
ALTER TABLE mdl_analytics_prediction_actions ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_analytics_used_analysables ADD FOREIGN KEY (modelid) REFERENCES mdl_analytics_models (id);
ALTER TABLE mdl_search_index_requests ADD FOREIGN KEY (contextid) REFERENCES mdl_context (id);
ALTER TABLE mdl_favourite ADD FOREIGN KEY (contextid) REFERENCES mdl_context (id);
ALTER TABLE mdl_favourite ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_customfield_category ADD FOREIGN KEY (contextid) REFERENCES mdl_context (id);
ALTER TABLE mdl_customfield_field ADD FOREIGN KEY (categoryid) REFERENCES mdl_customfield_category (id);
ALTER TABLE mdl_customfield_data ADD FOREIGN KEY (fieldid) REFERENCES mdl_customfield_field (id);
ALTER TABLE mdl_customfield_data ADD FOREIGN KEY (contextid) REFERENCES mdl_context (id);
ALTER TABLE mdl_auth_oauth2_linked_login ADD FOREIGN KEY (usermodified) REFERENCES mdl_user (id);
ALTER TABLE mdl_auth_oauth2_linked_login ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_auth_oauth2_linked_login ADD FOREIGN KEY (issuerid) REFERENCES mdl_oauth2_issuer (id);
ALTER TABLE mdl_block_recentlyaccesseditems ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_block_recentlyaccesseditems ADD FOREIGN KEY (courseid) REFERENCES mdl_course (id);
ALTER TABLE mdl_block_recentlyaccesseditems ADD FOREIGN KEY (cmid) REFERENCES mdl_course_modules (id);
ALTER TABLE mdl_enrol_flatfile ADD FOREIGN KEY (courseid) REFERENCES mdl_course (id);
ALTER TABLE mdl_enrol_flatfile ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_enrol_flatfile ADD FOREIGN KEY (roleid) REFERENCES mdl_role (id);
ALTER TABLE mdl_enrol_lti_tools ADD FOREIGN KEY (enrolid) REFERENCES mdl_enrol (id);
ALTER TABLE mdl_enrol_lti_tools ADD FOREIGN KEY (contextid) REFERENCES mdl_context (id);
ALTER TABLE mdl_enrol_lti_users ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_enrol_lti_users ADD FOREIGN KEY (toolid) REFERENCES mdl_enrol_lti_tools (id);
ALTER TABLE mdl_enrol_lti_lti2_tool_proxy ADD FOREIGN KEY (consumerid) REFERENCES mdl_enrol_lti_lti2_consumer (id);
ALTER TABLE mdl_enrol_lti_lti2_context ADD FOREIGN KEY (consumerid) REFERENCES mdl_enrol_lti_lti2_consumer (id);
ALTER TABLE mdl_enrol_lti_lti2_nonce ADD FOREIGN KEY (consumerid) REFERENCES mdl_enrol_lti_lti2_consumer (id);
ALTER TABLE mdl_enrol_lti_lti2_resource_link ADD FOREIGN KEY (contextid) REFERENCES mdl_enrol_lti_lti2_context (id);
ALTER TABLE mdl_enrol_lti_lti2_resource_link ADD FOREIGN KEY (primaryresourcelinkid) REFERENCES mdl_enrol_lti_lti2_resource_link (id);
ALTER TABLE mdl_enrol_lti_lti2_resource_link ADD FOREIGN KEY (consumerid) REFERENCES mdl_enrol_lti_lti2_consumer (id);
ALTER TABLE mdl_enrol_lti_lti2_user_result ADD FOREIGN KEY (resourcelinkid) REFERENCES mdl_enrol_lti_lti2_resource_link (id);
ALTER TABLE mdl_enrol_lti_tool_consumer_map ADD FOREIGN KEY (toolid) REFERENCES mdl_enrol_lti_tools (id);
ALTER TABLE mdl_enrol_lti_tool_consumer_map ADD FOREIGN KEY (consumerid) REFERENCES mdl_enrol_lti_lti2_consumer (id);
ALTER TABLE mdl_enrol_paypal ADD FOREIGN KEY (courseid) REFERENCES mdl_course (id);
ALTER TABLE mdl_enrol_paypal ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_enrol_paypal ADD FOREIGN KEY (instanceid) REFERENCES mdl_enrol (id);
ALTER TABLE mdl_local_moderation ADD FOREIGN KEY (messageid) REFERENCES mdl_messages (id);
ALTER TABLE mdl_local_moderation_flagtext ADD FOREIGN KEY (usermodified) REFERENCES mdl_user (id);
ALTER TABLE mdl_adaptivequiz ADD FOREIGN KEY (course) REFERENCES mdl_course (id);
ALTER TABLE mdl_adaptivequiz_question ADD FOREIGN KEY (instance) REFERENCES mdl_adaptivequiz (id);
ALTER TABLE mdl_adaptivequiz_question ADD FOREIGN KEY (questioncategory) REFERENCES mdl_question_categories (id);
ALTER TABLE mdl_adaptivequiz_attempt ADD FOREIGN KEY (instance) REFERENCES mdl_adaptivequiz (id);
ALTER TABLE mdl_adaptivequiz_attempt ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_adaptivequiz_attempt ADD FOREIGN KEY (uniqueid) REFERENCES mdl_question_usages (id);
ALTER TABLE mdl_assign_submission ADD FOREIGN KEY (assignment) REFERENCES mdl_assign (id);
ALTER TABLE mdl_assign_grades ADD FOREIGN KEY (assignment) REFERENCES mdl_assign (id);
ALTER TABLE mdl_assign_plugin_config ADD FOREIGN KEY (assignment) REFERENCES mdl_assign (id);
ALTER TABLE mdl_assign_user_mapping ADD FOREIGN KEY (assignment) REFERENCES mdl_assign (id);
ALTER TABLE mdl_assign_user_mapping ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_assign_user_flags ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_assign_user_flags ADD FOREIGN KEY (assignment) REFERENCES mdl_assign (id);
ALTER TABLE mdl_assign_overrides ADD FOREIGN KEY (assignid) REFERENCES mdl_assign (id);
ALTER TABLE mdl_assign_overrides ADD FOREIGN KEY (groupid) REFERENCES mdl_groups (id);
ALTER TABLE mdl_assign_overrides ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_assignment_submissions ADD FOREIGN KEY (assignment) REFERENCES mdl_assignment (id);
ALTER TABLE mdl_capquiz ADD FOREIGN KEY (course) REFERENCES mdl_course (id);
ALTER TABLE mdl_capquiz_question_list ADD FOREIGN KEY (author) REFERENCES mdl_user (id);
ALTER TABLE mdl_capquiz_question ADD FOREIGN KEY (question_id) REFERENCES mdl_question (id);
ALTER TABLE mdl_capquiz_question ADD FOREIGN KEY (question_list_id) REFERENCES mdl_capquiz_question_list (id);
ALTER TABLE mdl_capquiz_user ADD FOREIGN KEY (user_id) REFERENCES mdl_user (id);
ALTER TABLE mdl_capquiz_user ADD FOREIGN KEY (capquiz_id) REFERENCES mdl_capquiz (id);
ALTER TABLE mdl_capquiz_attempt ADD FOREIGN KEY (user_id) REFERENCES mdl_user (id);
ALTER TABLE mdl_capquiz_attempt ADD FOREIGN KEY (question_id) REFERENCES mdl_capquiz_question (id);
ALTER TABLE mdl_capquiz_question_selection ADD FOREIGN KEY (capquiz_id) REFERENCES mdl_capquiz (id);
ALTER TABLE mdl_capquiz_rating_system ADD FOREIGN KEY (capquiz_id) REFERENCES mdl_capquiz (id);
ALTER TABLE mdl_chat_messages ADD FOREIGN KEY (chatid) REFERENCES mdl_chat (id);
ALTER TABLE mdl_chat_messages_current ADD FOREIGN KEY (chatid) REFERENCES mdl_chat (id);
ALTER TABLE mdl_chat_users ADD FOREIGN KEY (chatid) REFERENCES mdl_chat (id);
ALTER TABLE mdl_choice_options ADD FOREIGN KEY (choiceid) REFERENCES mdl_choice (id);
ALTER TABLE mdl_choice_answers ADD FOREIGN KEY (choiceid) REFERENCES mdl_choice (id);
ALTER TABLE mdl_choice_answers ADD FOREIGN KEY (optionid) REFERENCES mdl_choice_options (id);
ALTER TABLE mdl_data_fields ADD FOREIGN KEY (dataid) REFERENCES mdl_data (id);
ALTER TABLE mdl_data_records ADD FOREIGN KEY (dataid) REFERENCES mdl_data (id);
ALTER TABLE mdl_data_content ADD FOREIGN KEY (recordid) REFERENCES mdl_data_records (id);
ALTER TABLE mdl_data_content ADD FOREIGN KEY (fieldid) REFERENCES mdl_data_fields (id);
ALTER TABLE mdl_feedback_item ADD FOREIGN KEY (feedback) REFERENCES mdl_feedback (id);
ALTER TABLE mdl_feedback_item ADD FOREIGN KEY (template) REFERENCES mdl_feedback_template (id);
ALTER TABLE mdl_feedback_completed ADD FOREIGN KEY (feedback) REFERENCES mdl_feedback (id);
ALTER TABLE mdl_feedback_completedtmp ADD FOREIGN KEY (feedback) REFERENCES mdl_feedback (id);
ALTER TABLE mdl_feedback_value ADD FOREIGN KEY (item) REFERENCES mdl_feedback_item (id);
ALTER TABLE mdl_feedback_valuetmp ADD FOREIGN KEY (item) REFERENCES mdl_feedback_item (id);
ALTER TABLE mdl_feedback_sitecourse_map ADD FOREIGN KEY (feedbackid) REFERENCES mdl_feedback (id);
ALTER TABLE mdl_forum_discussions ADD FOREIGN KEY (forum) REFERENCES mdl_forum (id);
ALTER TABLE mdl_forum_posts ADD FOREIGN KEY (discussion) REFERENCES mdl_forum_discussions (id);
ALTER TABLE mdl_forum_posts ADD FOREIGN KEY (parent) REFERENCES mdl_forum_posts (id);
ALTER TABLE mdl_forum_queue ADD FOREIGN KEY (discussionid) REFERENCES mdl_forum_discussions (id);
ALTER TABLE mdl_forum_queue ADD FOREIGN KEY (postid) REFERENCES mdl_forum_posts (id);
ALTER TABLE mdl_forum_subscriptions ADD FOREIGN KEY (forum) REFERENCES mdl_forum (id);
ALTER TABLE mdl_forum_digests ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_forum_digests ADD FOREIGN KEY (forum) REFERENCES mdl_forum (id);
ALTER TABLE mdl_forum_discussion_subs ADD FOREIGN KEY (forum) REFERENCES mdl_forum (id);
ALTER TABLE mdl_forum_discussion_subs ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_forum_discussion_subs ADD FOREIGN KEY (discussion) REFERENCES mdl_forum_discussions (id);
ALTER TABLE mdl_glossary_entries ADD FOREIGN KEY (glossaryid) REFERENCES mdl_glossary (id);
ALTER TABLE mdl_glossary_alias ADD FOREIGN KEY (entryid) REFERENCES mdl_glossary_entries (id);
ALTER TABLE mdl_glossary_categories ADD FOREIGN KEY (glossaryid) REFERENCES mdl_glossary (id);
ALTER TABLE mdl_glossary_entries_categories ADD FOREIGN KEY (categoryid) REFERENCES mdl_glossary_categories (id);
ALTER TABLE mdl_glossary_entries_categories ADD FOREIGN KEY (entryid) REFERENCES mdl_glossary_entries (id);
ALTER TABLE mdl_lesson_pages ADD FOREIGN KEY (lessonid) REFERENCES mdl_lesson (id);
ALTER TABLE mdl_lesson_answers ADD FOREIGN KEY (lessonid) REFERENCES mdl_lesson (id);
ALTER TABLE mdl_lesson_answers ADD FOREIGN KEY (pageid) REFERENCES mdl_lesson_pages (id);
ALTER TABLE mdl_lesson_attempts ADD FOREIGN KEY (lessonid) REFERENCES mdl_lesson (id);
ALTER TABLE mdl_lesson_attempts ADD FOREIGN KEY (pageid) REFERENCES mdl_lesson_pages (id);
ALTER TABLE mdl_lesson_attempts ADD FOREIGN KEY (answerid) REFERENCES mdl_lesson_answers (id);
ALTER TABLE mdl_lesson_grades ADD FOREIGN KEY (lessonid) REFERENCES mdl_lesson (id);
ALTER TABLE mdl_lesson_timer ADD FOREIGN KEY (lessonid) REFERENCES mdl_lesson (id);
ALTER TABLE mdl_lesson_branch ADD FOREIGN KEY (lessonid) REFERENCES mdl_lesson (id);
ALTER TABLE mdl_lesson_branch ADD FOREIGN KEY (pageid) REFERENCES mdl_lesson_pages (id);
ALTER TABLE mdl_lesson_overrides ADD FOREIGN KEY (lessonid) REFERENCES mdl_lesson (id);
ALTER TABLE mdl_lesson_overrides ADD FOREIGN KEY (groupid) REFERENCES mdl_groups (id);
ALTER TABLE mdl_lesson_overrides ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_lti_tool_settings ADD FOREIGN KEY (toolproxyid) REFERENCES mdl_lti_tool_proxies (id);
ALTER TABLE mdl_lti_tool_settings ADD FOREIGN KEY (typeid) REFERENCES mdl_lti_types (id);
ALTER TABLE mdl_lti_tool_settings ADD FOREIGN KEY (course) REFERENCES mdl_course (id);
ALTER TABLE mdl_lti_tool_settings ADD FOREIGN KEY (coursemoduleid) REFERENCES mdl_lti (id);
ALTER TABLE mdl_lti_access_tokens ADD FOREIGN KEY (typeid) REFERENCES mdl_lti_types (id);
ALTER TABLE mdl_qpractice_session ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_qpractice_session ADD FOREIGN KEY (questionusageid) REFERENCES mdl_question_usages (id);
ALTER TABLE mdl_qpractice_session ADD FOREIGN KEY (qpracticeid) REFERENCES mdl_qpractice (id);
ALTER TABLE mdl_qpractice_session ADD FOREIGN KEY (categoryid) REFERENCES mdl_question_categories (id);
ALTER TABLE mdl_qr_quiz_list ADD FOREIGN KEY (quiz) REFERENCES mdl_quiz (id);
ALTER TABLE mdl_quiz_slots ADD FOREIGN KEY (quizid) REFERENCES mdl_quiz (id);
ALTER TABLE mdl_quiz_slots ADD FOREIGN KEY (questionid) REFERENCES mdl_question (id);
ALTER TABLE mdl_quiz_slots ADD FOREIGN KEY (questioncategoryid) REFERENCES mdl_question_categories (id);
ALTER TABLE mdl_quiz_sections ADD FOREIGN KEY (quizid) REFERENCES mdl_quiz (id);
ALTER TABLE mdl_quiz_feedback ADD FOREIGN KEY (quizid) REFERENCES mdl_quiz (id);
ALTER TABLE mdl_quiz_overrides ADD FOREIGN KEY (quiz) REFERENCES mdl_quiz (id);
ALTER TABLE mdl_quiz_overrides ADD FOREIGN KEY (groupid) REFERENCES mdl_groups (id);
ALTER TABLE mdl_quiz_overrides ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_quiz_attempts ADD FOREIGN KEY (quiz) REFERENCES mdl_quiz (id);
ALTER TABLE mdl_quiz_attempts ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_quiz_grades ADD FOREIGN KEY (quiz) REFERENCES mdl_quiz (id);
ALTER TABLE mdl_quiz_slot_tags ADD FOREIGN KEY (slotid) REFERENCES mdl_quiz_slots (id);
ALTER TABLE mdl_quiz_slot_tags ADD FOREIGN KEY (tagid) REFERENCES mdl_tag (id);
ALTER TABLE mdl_scorm_scoes ADD FOREIGN KEY (scorm) REFERENCES mdl_scorm (id);
ALTER TABLE mdl_scorm_scoes_data ADD FOREIGN KEY (scoid) REFERENCES mdl_scorm_scoes (id);
ALTER TABLE mdl_scorm_scoes_track ADD FOREIGN KEY (scormid) REFERENCES mdl_scorm (id);
ALTER TABLE mdl_scorm_scoes_track ADD FOREIGN KEY (scoid) REFERENCES mdl_scorm_scoes (id);
ALTER TABLE mdl_scorm_seq_objective ADD FOREIGN KEY (scoid) REFERENCES mdl_scorm_scoes (id);
ALTER TABLE mdl_scorm_seq_mapinfo ADD FOREIGN KEY (scoid) REFERENCES mdl_scorm_scoes (id);
ALTER TABLE mdl_scorm_seq_mapinfo ADD FOREIGN KEY (objectiveid) REFERENCES mdl_scorm_seq_objective (id);
ALTER TABLE mdl_scorm_seq_ruleconds ADD FOREIGN KEY (scoid) REFERENCES mdl_scorm_scoes (id);
ALTER TABLE mdl_scorm_seq_rulecond ADD FOREIGN KEY (scoid) REFERENCES mdl_scorm_scoes (id);
ALTER TABLE mdl_scorm_seq_rulecond ADD FOREIGN KEY (ruleconditionsid) REFERENCES mdl_scorm_seq_ruleconds (id);
ALTER TABLE mdl_scorm_seq_rolluprule ADD FOREIGN KEY (scoid) REFERENCES mdl_scorm_scoes (id);
ALTER TABLE mdl_scorm_seq_rolluprulecond ADD FOREIGN KEY (scoid) REFERENCES mdl_scorm_scoes (id);
ALTER TABLE mdl_scorm_seq_rolluprulecond ADD FOREIGN KEY (rollupruleid) REFERENCES mdl_scorm_seq_rolluprule (id);
ALTER TABLE mdl_scorm_aicc_session ADD FOREIGN KEY (scormid) REFERENCES mdl_scorm (id);
ALTER TABLE mdl_scorm_aicc_session ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_survey_answers ADD FOREIGN KEY (survey) REFERENCES mdl_survey (id);
ALTER TABLE mdl_survey_answers ADD FOREIGN KEY (question) REFERENCES mdl_survey_questions (id);
ALTER TABLE mdl_survey_analysis ADD FOREIGN KEY (survey) REFERENCES mdl_survey (id);
ALTER TABLE mdl_wiki_subwikis ADD FOREIGN KEY (wikiid) REFERENCES mdl_wiki (id);
ALTER TABLE mdl_wiki_pages ADD FOREIGN KEY (subwikiid) REFERENCES mdl_wiki_subwikis (id);
ALTER TABLE mdl_wiki_versions ADD FOREIGN KEY (pageid) REFERENCES mdl_wiki_pages (id);
ALTER TABLE mdl_wiki_links ADD FOREIGN KEY (frompageid) REFERENCES mdl_wiki_pages (id);
ALTER TABLE mdl_wiki_links ADD FOREIGN KEY (subwikiid) REFERENCES mdl_wiki_subwikis (id);
ALTER TABLE mdl_workshop ADD FOREIGN KEY (course) REFERENCES mdl_course (id);
ALTER TABLE mdl_workshop_submissions ADD FOREIGN KEY (workshopid) REFERENCES mdl_workshop (id);
ALTER TABLE mdl_workshop_submissions ADD FOREIGN KEY (gradeoverby) REFERENCES mdl_user (id);
ALTER TABLE mdl_workshop_submissions ADD FOREIGN KEY (authorid) REFERENCES mdl_user (id);
ALTER TABLE mdl_workshop_assessments ADD FOREIGN KEY (submissionid) REFERENCES mdl_workshop_submissions (id);
ALTER TABLE mdl_workshop_assessments ADD FOREIGN KEY (gradinggradeoverby) REFERENCES mdl_user (id);
ALTER TABLE mdl_workshop_assessments ADD FOREIGN KEY (reviewerid) REFERENCES mdl_user (id);
ALTER TABLE mdl_workshop_grades ADD FOREIGN KEY (assessmentid) REFERENCES mdl_workshop_assessments (id);
ALTER TABLE mdl_workshop_aggregations ADD FOREIGN KEY (workshopid) REFERENCES mdl_workshop (id);
ALTER TABLE mdl_workshop_aggregations ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_portfolio_mahara_queue ADD FOREIGN KEY (transferid) REFERENCES mdl_portfolio_tempdata (id);
ALTER TABLE mdl_repository_onedrive_access ADD FOREIGN KEY (usermodified) REFERENCES mdl_user (id);
ALTER TABLE mdl_tool_customlang ADD FOREIGN KEY (componentid) REFERENCES mdl_tool_customlang_components (id);
ALTER TABLE mdl_tool_dataprivacy_request ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_tool_dataprivacy_request ADD FOREIGN KEY (requestedby) REFERENCES mdl_user (id);
ALTER TABLE mdl_tool_dataprivacy_request ADD FOREIGN KEY (dpo) REFERENCES mdl_user (id);
ALTER TABLE mdl_tool_dataprivacy_request ADD FOREIGN KEY (usermodified) REFERENCES mdl_user (id);
ALTER TABLE mdl_tool_dataprivacy_ctxinstance ADD FOREIGN KEY (purposeid) REFERENCES mdl_tool_dataprivacy_purpose (id);
ALTER TABLE mdl_tool_dataprivacy_ctxinstance ADD FOREIGN KEY (categoryid) REFERENCES mdl_tool_dataprivacy_category (id);
ALTER TABLE mdl_tool_dataprivacy_ctxlevel ADD FOREIGN KEY (categoryid) REFERENCES mdl_tool_dataprivacy_category (id);
ALTER TABLE mdl_tool_dataprivacy_ctxlevel ADD FOREIGN KEY (purposeid) REFERENCES mdl_tool_dataprivacy_purpose (id);
ALTER TABLE mdl_tool_dataprivacy_purposerole ADD FOREIGN KEY (purposeid) REFERENCES mdl_tool_dataprivacy_purpose (id);
ALTER TABLE mdl_tool_dataprivacy_purposerole ADD FOREIGN KEY (roleid) REFERENCES mdl_role (id);
ALTER TABLE mdl_tool_monitor_subscriptions ADD FOREIGN KEY (ruleid) REFERENCES mdl_tool_monitor_rules (id);
ALTER TABLE mdl_tool_monitor_history ADD FOREIGN KEY (sid) REFERENCES mdl_tool_monitor_subscriptions (id);
ALTER TABLE mdl_tool_policy ADD FOREIGN KEY (currentversionid) REFERENCES mdl_tool_policy_versions (id);
ALTER TABLE mdl_tool_policy_versions ADD FOREIGN KEY (usermodified) REFERENCES mdl_user (id);
ALTER TABLE mdl_tool_policy_versions ADD FOREIGN KEY (policyid) REFERENCES mdl_tool_policy (id);
ALTER TABLE mdl_tool_policy_acceptances ADD FOREIGN KEY (policyversionid) REFERENCES mdl_tool_policy_versions (id);
ALTER TABLE mdl_tool_policy_acceptances ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_tool_policy_acceptances ADD FOREIGN KEY (usermodified) REFERENCES mdl_user (id);
ALTER TABLE mdl_tool_recyclebin_course ADD FOREIGN KEY (courseid) REFERENCES mdl_course (id);
ALTER TABLE mdl_tool_recyclebin_category ADD FOREIGN KEY (categoryid) REFERENCES mdl_course_categories (id);
ALTER TABLE mdl_tool_usertours_steps ADD FOREIGN KEY (tourid) REFERENCES mdl_tool_usertours_tours (id);
ALTER TABLE mdl_message_email_messages ADD FOREIGN KEY (useridto) REFERENCES mdl_user (id);
ALTER TABLE mdl_message_email_messages ADD FOREIGN KEY (conversationid) REFERENCES mdl_message_conversations (id);
ALTER TABLE mdl_message_email_messages ADD FOREIGN KEY (messageid) REFERENCES mdl_messages (id);
ALTER TABLE mdl_message_popup_notifications ADD FOREIGN KEY (notificationid) REFERENCES mdl_notifications (id);
ALTER TABLE mdl_mnetservice_enrol_enrolments ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_mnetservice_enrol_enrolments ADD FOREIGN KEY (hostid) REFERENCES mdl_mnet_host (id);
ALTER TABLE mdl_qtype_algebra_options ADD FOREIGN KEY (questionid) REFERENCES mdl_question (id);
ALTER TABLE mdl_qtype_algebra_variables ADD FOREIGN KEY (questionid) REFERENCES mdl_question (id);
ALTER TABLE mdl_question_calculated ADD FOREIGN KEY (question) REFERENCES mdl_question (id);
ALTER TABLE mdl_question_calculated_options ADD FOREIGN KEY (question) REFERENCES mdl_question (id);
ALTER TABLE mdl_question_dataset_definitions ADD FOREIGN KEY (category) REFERENCES mdl_question_categories (id);
ALTER TABLE mdl_question_datasets ADD FOREIGN KEY (question) REFERENCES mdl_question (id);
ALTER TABLE mdl_question_datasets ADD FOREIGN KEY (datasetdefinition) REFERENCES mdl_question_dataset_definitions (id);
ALTER TABLE mdl_qtype_ddimageortext ADD FOREIGN KEY (questionid) REFERENCES mdl_question (id);
ALTER TABLE mdl_qtype_ddimageortext_drops ADD FOREIGN KEY (questionid) REFERENCES mdl_question (id);
ALTER TABLE mdl_qtype_ddimageortext_drags ADD FOREIGN KEY (questionid) REFERENCES mdl_question (id);
ALTER TABLE mdl_qtype_ddmarker ADD FOREIGN KEY (questionid) REFERENCES mdl_question (id);
ALTER TABLE mdl_qtype_ddmarker_drops ADD FOREIGN KEY (questionid) REFERENCES mdl_question (id);
ALTER TABLE mdl_qtype_ddmarker_drags ADD FOREIGN KEY (questionid) REFERENCES mdl_question (id);
ALTER TABLE mdl_question_ddwtos ADD FOREIGN KEY (questionid) REFERENCES mdl_question (id);
ALTER TABLE mdl_question_gapfill ADD FOREIGN KEY (question) REFERENCES mdl_question (id);
ALTER TABLE mdl_question_gapfill_settings ADD FOREIGN KEY (question) REFERENCES mdl_question (id);
ALTER TABLE mdl_question_gapselect ADD FOREIGN KEY (questionid) REFERENCES mdl_question (id);
ALTER TABLE mdl_question_imageselect ADD FOREIGN KEY (questionid) REFERENCES mdl_question (id);
ALTER TABLE mdl_question_imageselect_images ADD FOREIGN KEY (questionid) REFERENCES mdl_question (id);
ALTER TABLE mdl_qtype_match_subquestions ADD FOREIGN KEY (questionid) REFERENCES mdl_question (id);
ALTER TABLE mdl_question_multianswer ADD FOREIGN KEY (question) REFERENCES mdl_question (id);
ALTER TABLE mdl_question_numerical ADD FOREIGN KEY (question) REFERENCES mdl_question (id);
ALTER TABLE mdl_question_numerical_options ADD FOREIGN KEY (question) REFERENCES mdl_question (id);
ALTER TABLE mdl_question_numerical_units ADD FOREIGN KEY (question) REFERENCES mdl_question (id);
ALTER TABLE mdl_question_truefalse ADD FOREIGN KEY (question) REFERENCES mdl_question (id);
ALTER TABLE mdl_question_wordselect ADD FOREIGN KEY (questionid) REFERENCES mdl_question (id);
ALTER TABLE mdl_gradingform_guide_criteria ADD FOREIGN KEY (definitionid) REFERENCES mdl_grading_definitions (id);
ALTER TABLE mdl_gradingform_guide_fillings ADD FOREIGN KEY (instanceid) REFERENCES mdl_grading_instances (id);
ALTER TABLE mdl_gradingform_guide_fillings ADD FOREIGN KEY (criterionid) REFERENCES mdl_gradingform_guide_criteria (id);
ALTER TABLE mdl_gradingform_guide_comments ADD FOREIGN KEY (definitionid) REFERENCES mdl_grading_definitions (id);
ALTER TABLE mdl_gradingform_pfrbric_criteria ADD FOREIGN KEY (definitionid) REFERENCES mdl_grading_definitions (id);
ALTER TABLE mdl_gradingform_pfrbric_levels ADD FOREIGN KEY (criterionid) REFERENCES mdl_gradingform_pfrbric_criteria (id);
ALTER TABLE mdl_gradingform_pfrbric_fillings ADD FOREIGN KEY (instanceid) REFERENCES mdl_grading_instances (id);
ALTER TABLE mdl_gradingform_pfrbric_fillings ADD FOREIGN KEY (criterionid) REFERENCES mdl_gradingform_pfrbric_criteria (id);
ALTER TABLE mdl_gradingform_pfrbric_grades ADD FOREIGN KEY (instanceid) REFERENCES mdl_grading_instances (id);
ALTER TABLE mdl_gradingform_rubric_criteria ADD FOREIGN KEY (definitionid) REFERENCES mdl_grading_definitions (id);
ALTER TABLE mdl_gradingform_rubric_levels ADD FOREIGN KEY (criterionid) REFERENCES mdl_gradingform_rubric_criteria (id);
ALTER TABLE mdl_gradingform_rubric_fillings ADD FOREIGN KEY (instanceid) REFERENCES mdl_grading_instances (id);
ALTER TABLE mdl_gradingform_rubric_fillings ADD FOREIGN KEY (criterionid) REFERENCES mdl_gradingform_rubric_criteria (id);
ALTER TABLE mdl_assignfeedback_comments ADD FOREIGN KEY (assignment) REFERENCES mdl_assign (id);
ALTER TABLE mdl_assignfeedback_comments ADD FOREIGN KEY (grade) REFERENCES mdl_assign_grades (id);
ALTER TABLE mdl_assignfeedback_editpdf_cmnt ADD FOREIGN KEY (gradeid) REFERENCES mdl_assign_grades (id);
ALTER TABLE mdl_assignfeedback_editpdf_annot ADD FOREIGN KEY (gradeid) REFERENCES mdl_assign_grades (id);
ALTER TABLE mdl_assignfeedback_editpdf_quick ADD FOREIGN KEY (userid) REFERENCES mdl_user (id);
ALTER TABLE mdl_assignfeedback_editpdf_rot ADD FOREIGN KEY (gradeid) REFERENCES mdl_assign_grades (id);
ALTER TABLE mdl_assignfeedback_file ADD FOREIGN KEY (assignment) REFERENCES mdl_assign (id);
ALTER TABLE mdl_assignfeedback_file ADD FOREIGN KEY (grade) REFERENCES mdl_assign_grades (id);
ALTER TABLE mdl_assignfeedback_structured ADD FOREIGN KEY (assignment) REFERENCES mdl_assign (id);
ALTER TABLE mdl_assignfeedback_structured ADD FOREIGN KEY (grade) REFERENCES mdl_assign_grades (id);
ALTER TABLE mdl_assignfeedback_structured_cs ADD FOREIGN KEY (owner) REFERENCES mdl_user (id);
ALTER TABLE mdl_assignsubmission_file ADD FOREIGN KEY (assignment) REFERENCES mdl_assign (id);
ALTER TABLE mdl_assignsubmission_file ADD FOREIGN KEY (submission) REFERENCES mdl_assign_submission (id);
ALTER TABLE mdl_assignsubmission_onlinetext ADD FOREIGN KEY (assignment) REFERENCES mdl_assign (id);
ALTER TABLE mdl_assignsubmission_onlinetext ADD FOREIGN KEY (submission) REFERENCES mdl_assign_submission (id);
ALTER TABLE mdl_ltiservice_gradebookservices ADD FOREIGN KEY (ltilinkid) REFERENCES mdl_lti (id);
ALTER TABLE mdl_ltiservice_gradebookservices ADD FOREIGN KEY (gradeitemid) REFERENCES mdl_grade_items (id);
ALTER TABLE mdl_quiz_overview_regrades ADD FOREIGN KEY (questionusageid) REFERENCES mdl_question_attempts (questionusageid);
ALTER TABLE mdl_workshopform_accumulative ADD FOREIGN KEY (workshopid) REFERENCES mdl_workshop (id);
ALTER TABLE mdl_workshopform_comments ADD FOREIGN KEY (workshopid) REFERENCES mdl_workshop (id);
ALTER TABLE mdl_workshopform_numerrors ADD FOREIGN KEY (workshopid) REFERENCES mdl_workshop (id);
ALTER TABLE mdl_workshopform_numerrors_map ADD FOREIGN KEY (workshopid) REFERENCES mdl_workshop (id);
ALTER TABLE mdl_workshopform_rubric ADD FOREIGN KEY (workshopid) REFERENCES mdl_workshop (id);
ALTER TABLE mdl_workshopform_rubric_levels ADD FOREIGN KEY (dimensionid) REFERENCES mdl_workshopform_rubric (id);
ALTER TABLE mdl_logstore_standard_log ADD FOREIGN KEY (contextid) REFERENCES mdl_context (id);
